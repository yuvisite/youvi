/**
 * YouVi Video Cards System
 * Unified styling for video cards across all pages
 */

/* Video Grid Container */
.video-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 12px;
    /* Prevent grid items from overflowing */
    grid-auto-flow: row;
    align-items: start;
}

/* Video Card */
.video-card {
    position: relative;
    cursor: pointer;
    /* Prevent layout breaking */
    width: 100%;
    min-width: 0;
    overflow: hidden;
    contain: layout;
}

/* Video Thumbnail */
.video-thumbnail {
    width: 100%;
    height: auto;
    background: #eee;
    border-radius: 6px;
    position: relative;
    overflow: hidden;
    margin-bottom: 7px;
    display: block; /* ensure anchor thumbnails behave as block */
    aspect-ratio: 16/9;
    object-fit: cover;
}

/* Video Duration Badge */
.video-duration {
    position: absolute;
    bottom: 5px;
    right: 5px;
    background: rgba(0,0,0,0.8);
    padding: 2px 4px;
    border-radius: 2px;
    font-size: 11px;
    color: #fff; /* Ensure white text for the duration */
    z-index: 2; /* Ensure duration badge is always on top */
}

/* Video Quality Badge */
.video-quality {
    position: absolute;
    top: 5px;
    left: 5px;
    background: rgba(255,134,195,0.8);
    padding: 2px 4px;
    border-radius: 2px;
    font-size: 10px;
    color: #fff;
    z-index: 2;
    font-weight: bold;
}

/* Quality badge positioning for playlists - move under number */
.playlist-view-grid .video-quality,
.playlist-view-card .video-quality {
    top: 30px;
    left: 5px;
}

/* Video New Badge */
.video-new {
    position: absolute;
    top: 5px;
    right: 5px;
    background: #ff4444;
    padding: 2px 6px;
    border-radius: 2px;
    font-size: 10px;
    color: #fff;
    z-index: 2;
    font-weight: bold;
    text-transform: uppercase;
}

/* Badge visibility control */
.badges-hidden .video-quality,
.badges-hidden .video-new,
.badges-hidden [class*="video-quality"],
.badges-hidden [class*="video-new"] {
    display: none !important;
}

/* Hide badges in subscription videos specifically */
.badges-hidden .video-grid .video-quality,
.badges-hidden .video-grid .video-new,
.badges-hidden .channel-section .video-quality,
.badges-hidden .channel-section .video-new {
    display: none !important;
}

/* Video Number (for playlists) */
.video-number {
    position: absolute;
    top: 5px;
    left: 5px;
    background: rgba(255, 105, 180, 0.8);
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 16px;
    font-weight: bold;
    z-index: 4;
}

/* Video Info Container */
.video-info {
    padding: 0 5px;
    /* Prevent text overflow breaking layout */
    width: 100%;
    min-width: 0;
    overflow-wrap: break-word;
    word-break: break-word;
}

/* Video Card Title */
.video-card-title {
    font-size: 16px;
    margin-bottom: 3px;
    line-height: 1.3;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    line-clamp: 2;
    color: #111;
    /* Prevent title overflow from breaking layout */
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
}

.video-card-meta-row {
    display: flex;
    gap: 8px;
    align-items: center;
    margin-top: 4px;
}

.video-card-avatar-link {
    text-decoration: none;
    display: block;
    flex-shrink: 0;
}

.video-card-avatar {
    width: 32px;
    height: 32px;
    background-color: #ff69b4;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 14px;
    font-weight: bold;
    flex-shrink: 0;
    background-size: cover;
    background-position: center;
    border: none !important;
    outline: none !important;
    box-shadow: none !important;
    -webkit-tap-highlight-color: transparent;
    align-self: flex-start;
}

.video-card-avatar.custom-avatar {
    background-color: transparent;
}

.video-card-text {
    flex: 1;
    min-width: 0;
}

/* Video Playlist Info */
.video-playlist {
    font-size: 11px;
    color: #ff69b4;
    margin-bottom: 2px;
}

/* Video Category */
.video-category {
    font-size: 11px;
    color: #666;
}

/* Video Views */
.video-views {
    font-size: 11px;
    color: #666;
    margin-top: 2px;
    display: flex;
    align-items: center;
    gap: 4px;
}

.video-views::before {
    content: 'üëÅ';
    font-size: 10px;
}

/* Links Styling */
.video-tag-link, 
.video-category-link {
    color: #666; /* Match light theme text color */
    text-decoration: none; /* Remove underline */
    margin-right: 5px; /* Add some spacing between tags */
    cursor: pointer; /* Indicate clickability */
}

/* Badge Hiding System */
/* Hide badges when disabled - only quality and freshness, NOT duration */
.badges-hidden .video-quality,
.badges-hidden .video-new {
    display: none !important;
}

/* Hide inline style badges when disabled - only quality and freshness, NOT duration */
.badges-hidden [style*="position:absolute"][style*="top:5px"][style*="left:5px"][style*="background: rgba(255,134,195,0.8)"],
.badges-hidden [style*="position:absolute"][style*="top:5px"][style*="right:5px"][style*="background:#ff4444"] {
    display: none !important;
}

/* Additional selectors for badges with specific styles - only quality and freshness */
.badges-hidden [style*="background: rgba(255,134,195,0.8)"],
.badges-hidden [style*="background:#ff4444"] {
    display: none !important;
}

/* Hide all badges when disabled - comprehensive approach - only quality and freshness */
.badges-hidden [class*="video-quality"],
.badges-hidden [class*="video-new"] {
    display: none !important;
}

/* Hide badges in carousel and other containers - only quality and freshness */
.badges-hidden .video-carousel [class*="video-quality"],
.badges-hidden .video-carousel [class*="video-new"],
.badges-hidden .playlist-section-carousel [class*="video-quality"],
.badges-hidden .playlist-section-carousel [class*="video-new"] {
    display: none !important;
}

/* Hide badges in latest grid - only quality and freshness */
.badges-hidden .latest-grid [class*="video-quality"],
.badges-hidden .latest-grid [class*="video-new"] {
    display: none !important;
}

/* Hide badges in playlists grid - only quality and freshness */
.badges-hidden .playlists-grid [class*="video-quality"],
.badges-hidden .playlists-grid [class*="video-new"] {
    display: none !important;
}

/* Hide badges in top playlists container - only quality and freshness */
.badges-hidden #topPlaylistsContainer [class*="video-quality"],
.badges-hidden #topPlaylistsContainer [class*="video-new"] {
    display: none !important;
}

/* Hide badges in all video containers - final comprehensive rule - only quality and freshness */
.badges-hidden [style*="position:absolute"][style*="z-index"][style*="top:5px"] {
    display: none !important;
}

/* Latest Videos Grid */
.latest-grid {
    display: grid;
    /* Controlled by a CSS variable with default 6 */
    grid-template-columns: repeat(var(--latest-cols, 6), 1fr);
    gap: 10px;
    padding: 0 20px 0 20px;
    flex: 1; /* Take remaining space */
    min-height: 0; /* Allow shrinking */
    /* Prevent rows from stretching to fill the available height */
    align-content: start;
    justify-content: start;
    /* Prevent grid items from overflowing */
    grid-auto-flow: row;
    align-items: start;
}

.latest-card {
    position: relative;
    cursor: pointer;
    /* Prevent layout breaking */
    width: 100%;
    min-width: 0;
    overflow: hidden;
    contain: layout;
}

.latest-thumb {
    width: 100%;
    height: auto;
    object-fit: cover;
    background: #eee;
    border-radius: 6px;
    position: relative;
    overflow: hidden;
    margin-bottom: 4px;
    display: block;
    aspect-ratio: 16/9;
}

.latest-info {
    padding: 0 5px;
    /* Prevent text overflow breaking layout */
    width: 100%;
    min-width: 0;
    overflow-wrap: break-word;
    word-break: break-word;
}

.latest-title-text {
    font-size: 11px;
    margin-bottom: 2px;
    line-height: 1.3;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    line-clamp: 2;
    color: #111;
    /* Prevent title overflow from breaking layout */
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
}

.latest-sub {
    font-size: 9px;
    color: #666;
}

.latest-channel {
    font-size: 9px;
    color: #ff69b4;
    margin-bottom: 1px;
}

.latest-duration {
    position: absolute;
    bottom: 5px;
    right: 5px;
    background: rgba(0,0,0,0.8);
    padding: 2px 4px;
    border-radius: 2px;
    font-size: 11px;
    color: #fff;
    z-index: 2;
}

/* Video Carousel */
.video-carousel {
    /* Use the same grid system as latest videos */
    display: grid;
    grid-template-columns: repeat(var(--latest-cols, 6), 1fr);
    gap: 8px;
    width: 100%;
    align-content: start;
    justify-content: start;
    /* Prevent grid items from overflowing */
    grid-auto-flow: row;
    align-items: start;
}

.video-carousel .video-card {
    /* Grid children shouldn't be width-constrained by flex */
    flex: initial;
    max-width: none;
    min-width: 0;
    overflow: hidden;
    transition: transform .2s, box-shadow .2s;
    /* Prevent layout breaking */
    width: 100%;
    contain: layout;
}

.video-carousel .video-thumbnail {
    background: #eee;
    position: relative;
    overflow: hidden;
    /* border-radius: 6px; */ /* Changed to match mockup */
    width: 100%; /* Fill parent card's width */
    height: auto;
    object-fit: cover;
    margin-bottom: 4px;
    display: block; /* ensure anchor thumbnails behave as block */
    aspect-ratio: 16/9;
    object-fit: cover;
}

.video-carousel .video-duration {
    position: absolute;
    bottom: 5px;
    right: 5px;
    background: rgba(0,0,0,0.8);
    padding: 2px 4px;
    border-radius: 2px;
    font-size: 11px;
    color: #fff;
    z-index: 2; /* Ensure duration badge is always on top */
}

.video-carousel .video-info {
    padding: 0 5px; /* Changed padding to match mockup */
}

.video-carousel .video-playlist { /* Added video-playlist style */
    font-size: 10px; /* Reduced from 11px */
    color: #ff69b4;
    margin-bottom: 1px; /* Reduced from 2px */
}

.video-carousel .video-card-title {
    font-size: 11px; /* Reduced from 13px */
    margin-bottom: 2px; /* Reduced from 3px */
    line-height: 1.2; /* Reduced from 1.3 */
    color: #111;
    overflow: hidden; /* Simple overflow instead of webkit-line-clamp */
    text-overflow: ellipsis;
    white-space: nowrap; /* Single line for carousel titles */
}

.video-carousel .video-category {
    font-size: 9px; /* Reduced from 11px */
    color: #666;
}

.video-carousel .video-views {
    font-size: 9px; /* Reduced from 11px */
    color: #666;
    margin-top: 1px; /* Reduced from 2px */
    display: flex;
    align-items: center;
    gap: 3px; /* Reduced from 4px */
}

.video-carousel .video-views::before {
    content: 'üëÅ';
    font-size: 8px; /* Reduced from 10px */
}

/* Mobile-first responsive grid adjustments */
@media (max-width: 1200px) {
    .video-grid {
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    }
    .latest-grid {
        grid-template-columns: repeat(var(--latest-cols, 5), 1fr);
    }
    .video-carousel {
        grid-template-columns: repeat(var(--latest-cols, 5), 1fr);
    }
}

@media (max-width: 1000px) {
    .video-grid {
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 10px;
    }
    .latest-grid {
        grid-template-columns: repeat(var(--latest-cols, 4), 1fr);
    }
    .video-carousel {
        grid-template-columns: repeat(var(--latest-cols, 4), 1fr);
    }
}

@media (max-width: 850px) {
    .video-grid {
        grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
    }
    .latest-grid {
        grid-template-columns: repeat(var(--latest-cols, 3), 1fr);
    }
    .video-carousel {
        grid-template-columns: repeat(var(--latest-cols, 3), 1fr);
    }
}

@media (max-width: 650px) {
    .video-grid {
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 8px;
    }
    .latest-grid {
        grid-template-columns: repeat(var(--latest-cols, 2), 1fr);
        gap: 8px;
    }
    .video-carousel {
        grid-template-columns: repeat(var(--latest-cols, 2), 1fr);
        gap: 8px;
    }
}

@media (max-width: 480px) {
    .video-grid {
        grid-template-columns: 1fr 1fr;
        gap: 6px;
    }
    .latest-grid {
        grid-template-columns: 1fr 1fr;
        gap: 6px;
    }
    .video-carousel {
        grid-template-columns: 1fr 1fr;
        gap: 6px;
    }
    
    /* Stabilize video cards on mobile */
    .video-card, .latest-card {
        width: 100%;
        min-width: 0;
        overflow: hidden;
        max-width: none;
    }
    
    .video-thumbnail, .latest-thumb {
        width: 100%;
        aspect-ratio: 16/9;
        object-fit: cover;
        height: auto;
        min-height: 0;
    }
    
    .video-info, .latest-info {
        width: 100%;
        min-width: 0;
        overflow-wrap: break-word;
        word-break: break-word;
    }
    
    .video-card-title, .latest-title-text {
        font-size: 12px;
        line-height: 1.2;
        overflow: hidden;
        text-overflow: ellipsis;
        word-wrap: break-word;
    }
}

@media (max-width: 360px) {
    .video-grid {
        grid-template-columns: 1fr;
        gap: 8px;
    }
    .latest-grid {
        grid-template-columns: 1fr;
        gap: 8px;
    }
    .video-carousel {
        grid-template-columns: 1fr;
        gap: 8px;
    }
}

/* =====================================================
   DARK THEME SUPPORT
   ===================================================== */

/* Video Cards in Dark Theme */
body.dark-theme .video-card {
    background: transparent !important; /* Match page background, not grey */
}

body.dark-theme .video-thumbnail {
    background: #444; /* Dark grey placeholder */
}

body.dark-theme .video-card-title,
body.dark-theme .video-title,
body.dark-theme .latest-title-text {
    color: #fff !important; /* White text for titles - FORCE OVERRIDE */
}

body.dark-theme .video-title-link {
    color: #fff !important; /* White text for title links - FORCE OVERRIDE */
}

body.dark-theme .video-info {
    background: transparent !important; /* No background, match page */
}

body.dark-theme .video-category,
body.dark-theme .video-tag-link,
body.dark-theme .video-category-link {
    color: #999; /* Light grey for meta text */
}

body.dark-theme .video-tag-link:hover,
body.dark-theme .video-category-link:hover {
    color: #ff69b4; /* Pink on hover */
}

body.dark-theme .video-views,
body.dark-theme .video-meta,
body.dark-theme .video-date {
    color: #aaa; /* Light grey for views/meta */
}

body.dark-theme .video-playlist {
    color: #ff69b4; /* Keep pink for playlist links */
}

/* Latest Cards in Dark Theme */
body.dark-theme .latest-card {
    background: transparent !important; /* Match page background */
}

body.dark-theme .latest-thumb {
    background: #444;
}

body.dark-theme .latest-info {
    color: #999;
}

/* Channel Section Styling in Dark Theme */
body.dark-theme .channel-section {
    background: transparent;
}

body.dark-theme .channel-section-header {
    border-bottom-color: #333;
}

body.dark-theme .channel-section-name {
    color: #fff;
}

body.dark-theme .channel-section-name a {
    color: #fff;
}

body.dark-theme .channel-section-name a:hover {
    color: #ff69b4;
}

body.dark-theme .channel-section-stats {
    color: #999;
}

body.dark-theme .view-all-btn {
    background: transparent;
    border-color: #ff69b4;
    color: #ff69b4;
}

body.dark-theme .view-all-btn:hover {
    background: #ff69b4;
    color: white;
}
